/* esm.sh - esbuild bundle(@unocss/core@0.37.2) deno production */
function At(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function J(e){let t=e.length,r=-1,n,s="",a=e.charCodeAt(0);for(;++r<t;){if(n=e.charCodeAt(r),n===0){s+="\uFFFD";continue}if(n===44){s+="\\,";continue}if(n>=1&&n<=31||n===127||r===0&&n>=48&&n<=57||r===1&&n>=48&&n<=57&&a===45){s+=`\\${n.toString(16)} `;continue}if(r===0&&t===1&&n===45){s+=`\\${e.charAt(r)}`;continue}if(n>=128||n===45||n===95||n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122){s+=e.charAt(r);continue}s+=`\\${e.charAt(r)}`}return s}var P=J;function x(e){return(Array.isArray(e)?e:Object.entries(e)).filter(t=>t[1]!=null)}function K(e){return Array.isArray(e)?e.find(t=>!Array.isArray(t)||Array.isArray(t[0]))?e.map(t=>x(t)):[e]:[x(e)]}function X(e){return e.filter(([t,r],n)=>{if(t.startsWith("$$"))return!1;for(let s=n-1;s>=0;s--)if(e[s][0]===t&&e[s][1]===r)return!1;return!0})}function k(e){return e==null?"":X(e).map(([t,r])=>r!=null?`${t}:${r};`:void 0).filter(Boolean).join("")}function O(e){return e&&typeof e=="object"&&!Array.isArray(e)}function N(e,t){let r=e,n=t;if(Array.isArray(r)&&Array.isArray(n))return[...r,...n];if(Array.isArray(r))return[...r];let s={...r};return O(r)&&O(n)&&Object.keys(n).forEach(a=>{O(r[a])&&O(n[a])||Array.isArray(r[a])&&Array.isArray(n[a])?s[a]=N(r[a],n[a]):Object.assign(s,{[a]:n[a]})}),s}function M(e){let t,r,n;if(Array.isArray(e)){for(r=Array(t=e.length);t--;)r[t]=(n=e[t])&&typeof n=="object"?M(n):n;return r}if(Object.prototype.toString.call(e)==="[object Object]"){r={};for(t in e)t==="__proto__"?Object.defineProperty(r,t,{value:M(e[t]),configurable:!0,enumerable:!0,writable:!0}):r[t]=(n=e[t])&&typeof n=="object"?M(n):n;return r}return e}function Y(e){return typeof e[0]=="string"}function tt(e){return typeof e[0]=="string"}function E(e=[]){return Array.isArray(e)?e:[e]}function L(e){return Array.from(new Set(e))}function _t(e,t){return t.forEach(r=>e.add(r)),e}var et=/^\[(.+?)~?="(.*)"\]$/,wt=/\.(css|postcss|sass|scss|less|stylus|styl)$/,rt=/(?!\d|-{2}|-\d)[a-zA-Z0-9\u00A0-\uFFFF-_:%-?]/,F="$$shortcut-no-merge";function vt(e){return e.match(et)}function nt(e=""){return rt.test(e)}function st(e){return typeof e=="function"?{match:e}:e}function T(e){return e.length===3}function it(e){return e!=null}function U(){}var V=class{constructor(){this._map=new Map}get(t,r){let n=this._map.get(t);if(n)return n.get(r)}getFallback(t,r,n){let s=this._map.get(t);return s||(s=new Map,this._map.set(t,s)),s.has(r)||s.set(r,n),s.get(r)}set(t,r,n){let s=this._map.get(t);return s||(s=new Map,this._map.set(t,s)),s.set(r,n),this}has(t,r){return this._map.get(t)?.has(r)}delete(t,r){return this._map.get(t)?.delete(r)||!1}deleteTop(t){return this._map.delete(t)}map(t){return Array.from(this._map.entries()).flatMap(([r,n])=>Array.from(n.entries()).map(([s,a])=>t(a,r,s)))}},z=class extends Map{map(t){let r=[];return this.forEach((n,s)=>{r.push(t(n,s))}),r}};function bt(e,t){return t.forEach(r=>{r[2]?r[2].layer=e:r[2]={layer:e}}),t}var q=/([!\w+:_/-]+?)([:-])\(((?:[~!\w\s:/\\,%#.$-]|\[.*?\])*?)\)/gm;function ot(e){q.lastIndex=0;let t=!1;do{let r=e.toString();e=e.replace(q,(n,s,a,o)=>o.split(/\s/g).map(c=>c==="~"?s:c.replace(/^(!?)(.*)/,`$1${s}${a}$2`)).join(" ")),t=e.toString()!==r}while(t);return e}var H=new Set;function at(e){H.has(e)||(console.warn("[unocss]",e),H.add(e))}function Et(e){let t=function(n){let s=this.__options?.sequence||[];this.__options.sequence=[];for(let a of s){let o=e[a](n);if(o!=null)return o}};function r(n,s){return n.__options||(n.__options={sequence:[]}),n.__options.sequence.push(s),n}for(let n of Object.keys(e))Object.defineProperty(t,n,{enumerable:!0,get(){return r(this,n)}});return t}function ct(e,[t,r],n,s){let a=e.length,o=+(e[n]===t);for(;++n<a;){let c=e[n];if(c===t)o++;else if(c===r){if(o--,o===0)return n}else s&&c==="\\"&&n++}return-1}var lt=["'",'"',"`"];function ft(e,t={}){let{deep:r=!1,templateStaticOnly:n=!1,details:s=!1,range:[a,o]=[0,e.length]}=t,c=[],i,f=(h,g)=>c.push(s?{value:e.slice(h,g),range:[h,g],quote:i}:e.slice(h,g)),p=a;for(;p<o;){let h=e[p];if(lt.includes(h)){i=h;let g=p+1,l=i==="`",y=g,A=g;for(;A<o;){let S=e[A];if(S===i){if(l&&n){f(y,A);break}f(g,A);break}if(S==="\\")A+=2;else if(l&&S==="$"&&e[A+1]==="{"){let u=A+2;A=ct(e,"{}",A+1,!0),n&&f(y,u-2),y=A+1,r&&c.push(...ft(e,{...t,range:[u,A]}))}else A+=1}p=A+1}else p++}return c}var G=e=>e.split(/[\s'"`;>=]+/g).filter(nt),ut={name:"split",order:0,extract({code:e}){return new Set(G(e))}},Ct={name:"svelte",order:0,extract({code:e,id:t}){let r=G(e);return t&&t.endsWith(".svelte")&&(r=r.map(n=>n.startsWith("class:")?n.slice(6):n)),new Set(r)}};function ht(){return{events:{},emit(e,...t){(this.events[e]||[]).forEach(r=>r(...t))},on(e,t){return(this.events[e]=this.events[e]||[]).push(t),()=>this.events[e]=(this.events[e]||[]).filter(r=>r!==t)}}}function pt(e){return E(e).flatMap(t=>Array.isArray(t)?[t]:Object.entries(t))}var mt={preflights:-100,shortcuts:-1,default:0};function I(e={},t={}){let r=Object.assign({},t,e),n=(r.presets||[]).flatMap(E),s=[...n.filter(l=>l.enforce==="pre"),...n.filter(l=>!l.enforce),...n.filter(l=>l.enforce==="post")],a=Object.assign(mt,...n.map(l=>l.layers),e.layers);function o(l){return L([...s.flatMap(y=>E(y[l]||[])),...E(r[l]||[])])}let c=o("extractors");c.length||c.push(ut),c.sort((l,y)=>(l.order||0)-(y.order||0));let i=o("rules"),f={},p=i.length;i.forEach((l,y)=>{Y(l)&&(f[l[0]]=[y,l[1],l[2],l],delete i[y])});let h=M([...s.map(l=>l.theme||{}),r.theme||{}].reduce((l,y)=>N(l,y),{}));o("extendTheme").forEach(l=>l(h));let g={templates:L(s.map(l=>E(l.autocomplete?.templates)).flat()),extractors:s.map(l=>E(l.autocomplete?.extractors)).flat().sort((l,y)=>(l.order||0)-(y.order||0))};return{mergeSelectors:!0,warn:!0,blocklist:[],sortLayers:l=>l,...r,presets:s,envMode:r.envMode||"build",shortcutsLayer:r.shortcutsLayer||"shortcuts",layers:a,theme:h,rulesSize:p,rulesDynamic:i,rulesStaticMap:f,preprocess:o("preprocess"),postprocess:o("postprocess"),preflights:o("preflights"),autocomplete:g,variants:o("variants").map(st),shortcuts:pt(o("shortcuts")),extractors:c,safelist:o("safelist")}}var dt="0.37.2",R=class{constructor(t={},r={}){this.userConfig=t,this.defaults=r,this.version=dt,this._cache=new Map,this.blocked=new Set,this.parentOrders=new Map,this.events=ht(),this.config=I(t,r),this.events.emit("config",this.config)}setConfig(t,r){!t||(r&&(this.defaults=r),this.userConfig=t,this.blocked.clear(),this.parentOrders.clear(),this._cache.clear(),this.config=I(t,this.defaults),this.events.emit("config",this.config))}async applyExtractors(t,r,n=new Set){let s={get original(){return t},code:t,id:r};for(let a of this.config.extractors)(await a.extract(s))?.forEach(c=>n.add(c));return n}makeContext(t,r){let n={rawSelector:t,currentSelector:r[1],theme:this.config.theme,generator:this,variantHandlers:r[2],constructCSS:(...s)=>this.constructCustomCSS(n,...s),variantMatch:r};return n}async parseToken(t,r){if(this.blocked.has(t))return;let n=`${t}${r?` ${r}`:""}`;if(this._cache.has(n))return this._cache.get(n);let s=t;for(let i of this.config.preprocess)s=i(t);if(this.isBlocked(s)){this.blocked.add(t),this._cache.set(n,null);return}let a=this.matchVariants(t,s);if(!a||this.isBlocked(a[1])){this.blocked.add(t),this._cache.set(n,null);return}let o=this.makeContext(t,[r||a[0],a[1],a[2],a[3]]);this.config.details&&(o.variants=[...a[3]]);let c=this.expandShortcut(o.currentSelector,o);if(c){let i=await this.stringifyShortcuts(o.variantMatch,o,c[0],c[1]);if(i?.length)return this._cache.set(n,i),i}else{let i=(await this.parseUtil(o.variantMatch,o))?.map(f=>this.stringifyUtil(f,o)).filter(it);if(i?.length)return this._cache.set(n,i),i}this._cache.set(n,null)}async generate(t="",{id:r,scope:n,preflights:s=!0,safelist:a=!0,minify:o=!1}={}){let c=typeof t=="string"?await this.applyExtractors(t,r):t;a&&this.config.safelist.forEach(u=>c.add(u));let i=o?"":`
`,f=new Set(["default"]),p=new Set,h=new Map;await Promise.all(Array.from(c).map(async u=>{if(p.has(u))return;let m=await this.parseToken(u);if(m!=null){p.add(u);for(let d of m){let _=d[3]||"";h.has(_)||h.set(_,[]),h.get(_).push(d),d[4]?.layer&&f.add(d[4].layer)}}})),s&&this.config.preflights.forEach(u=>{u.layer&&f.add(u.layer)});let g={},l=this.config.sortLayers(Array.from(f).sort((u,m)=>(this.config.layers[u]??0)-(this.config.layers[m]??0)||u.localeCompare(m))),y={};if(s){let u={generator:this,theme:this.config.theme};y=Object.fromEntries(await Promise.all(l.map(async m=>{let _=(await Promise.all(this.config.preflights.filter(w=>(w.layer||"default")===m).map(async w=>await w.getCSS(u)))).filter(Boolean).join(i);return[m,_]})))}let A=u=>{if(g[u])return g[u];let m=Array.from(h).sort((d,_)=>(this.parentOrders.get(d[0])??0)-(this.parentOrders.get(_[0])??0)||d[0]?.localeCompare(_[0]||"")||0).map(([d,_])=>{let w=_.length,b=_.filter($=>($[4]?.layer||"default")===u).sort(($,v)=>$[0]-v[0]||($[4]?.sort||0)-(v[4]?.sort||0)||$[1]?.localeCompare(v[1]||"")||0).map($=>[$[1]?yt($[1],n):$[1],$[2],!!$[4]?.noMerge]).map($=>[$[0]==null?$[0]:[$[0]],$[1],$[2]]);if(!b.length)return;let B=b.reverse().map(([$,v,Q],Z)=>{if(!Q&&$&&this.config.mergeSelectors)for(let j=Z+1;j<w;j++){let C=b[j];if(C&&!C[2]&&C[0]&&C[1]===v)return C[0].push(...$),null}return $?`${[...new Set($)].join(`,${i}`)}{${v}}`:v}).filter(Boolean).reverse().join(i);return d?`${d}{${i}${B}${i}}`:B}).filter(Boolean).join(i);return s&&(m=[y[u],m].filter(Boolean).join(i)),g[u]=!o&&m?`/* layer: ${u} */${i}${m}`:m},S=(u=l,m)=>u.filter(d=>!m?.includes(d)).map(d=>A(d)||"").filter(Boolean).join(i);return{get css(){return S()},layers:l,getLayers:S,getLayer:A,matched:p}}matchVariants(t,r){let n=new Set,s=[],a=r||t,o=!1,c={rawSelector:t,theme:this.config.theme,generator:this};for(;;){o=!1;for(let i of this.config.variants){if(!i.multiPass&&n.has(i))continue;let f=i.match(a,c);if(!!f){typeof f=="string"&&(f={matcher:f}),a=f.matcher,Array.isArray(f.parent)&&this.parentOrders.set(f.parent[0],f.parent[1]),s.unshift(f),n.add(i),o=!0;break}}if(!o)break;if(s.length>500)throw new Error(`Too many variants applied to "${t}"`)}return[t,a,s,n]}applyVariants(t,r=t[4],n=t[1]){let s=[...r].sort((i,f)=>(i.order||0)-(f.order||0)),a=s.reduce((i,f)=>f.body?.(i)||i,t[2]),o=s.reduce((i,f)=>f.selector?.(i,a)||i,$t(n)),c={selector:St(o),entries:a,parent:s.reduce((i,f)=>Array.isArray(f.parent)?f.parent[0]:f.parent||i,void 0),layer:s.reduce((i,f)=>f.layer||i,void 0),sort:s.reduce((i,f)=>f.sort||i,void 0)};for(let i of this.config.postprocess)i(c);return c}constructCustomCSS(t,r,n){r=x(r);let{selector:s,entries:a,parent:o}=this.applyVariants([0,n||t.rawSelector,r,void 0,t.variantHandlers]),c=`${s}{${k(a)}}`;return o?`${o}{${c}}`:c}async parseUtil(t,r,n=!1){let[s,a,o]=typeof t=="string"?this.matchVariants(t):t,c=this.config.details?h=>{r.rules=r.rules??[],r.rules.push(h)}:U,i=this.config.rulesStaticMap[a];if(i&&i[1]&&(n||!i[2]?.internal))return c(i[3]),[[i[0],s,x(i[1]),i[2],o]];r.variantHandlers=o;let{rulesDynamic:f,rulesSize:p}=this.config;for(let h=p-1;h>=0;h--){let g=f[h];if(!g||g[2]?.internal&&!n)continue;let[l,y,A]=g,S=a.match(l);if(!S)continue;let u=await y(S,r);if(!u)continue;if(c(g),typeof u=="string")return[[h,u,A]];let m=K(u).filter(d=>d.length);if(m.length)return m.map(d=>[h,s,d,A,o])}}stringifyUtil(t,r){if(!t)return;if(T(t))return[t[0],void 0,t[1],void 0,t[2],this.config.details?r:void 0];let{selector:n,entries:s,parent:a,layer:o,sort:c}=this.applyVariants(t),i=k(s);if(!i)return;let{layer:f,sort:p,...h}=t[3]??{},g={...h,layer:o??f,sort:c??p};return[t[0],n,i,a,g,this.config.details?r:void 0]}expandShortcut(t,r,n=3){if(n===0)return;let s=this.config.details?c=>{r.shortcuts=r.shortcuts??[],r.shortcuts.push(c)}:U,a,o;for(let c of this.config.shortcuts)if(tt(c)){if(c[0]===t){a=a||c[2],o=c[1],s(c);break}}else{let i=t.match(c[0]);if(i&&(o=c[1](i,r)),o){a=a||c[2],s(c);break}}if(typeof o=="string"&&(o=ot(o).split(/\s+/g)),!!o)return[o.flatMap(c=>this.expandShortcut(c,r,n-1)?.[0]||[c]).filter(c=>c!==""),a]}async stringifyShortcuts(t,r,n,s={layer:this.config.shortcutsLayer}){let a=new V,o=(await Promise.all(L(n).map(async p=>{let h=await this.parseUtil(p,r,!0);return h||at(`unmatched utility "${p}" in shortcut "${t[1]}"`),h||[]}))).flat(1).filter(Boolean).sort((p,h)=>p[0]-h[0]),[c,,i]=t,f=[];for(let p of o){if(T(p)){f.push([p[0],void 0,p[1],void 0,p[2],r]);continue}let{selector:h,entries:g,parent:l,sort:y}=this.applyVariants(p,[...p[4],...i],c);a.getFallback(h,l,[[],p[0]])[0].push([g,!!p[3]?.noMerge,y??0])}return f.concat(a.map(([p,h],g,l)=>{let y=(S,u,m)=>{let d=Math.max(...m.map(w=>w[1])),_=m.map(w=>w[0]);return(S?[_.flat(1)]:_).map(w=>{let b=k(w);if(b)return[h,g,b,l,{...s,noMerge:u,sort:d},r]})};return[[p.filter(([,S])=>S).map(([S,,u])=>[S,u]),!0],[p.filter(([,S])=>!S).map(([S,,u])=>[S,u]),!1]].map(([S,u])=>[...y(!1,u,S.filter(([m])=>m.some(d=>d[0]===F))),...y(!0,u,S.filter(([m])=>m.every(d=>d[0]!==F)))])}).flat(2).filter(Boolean))}isBlocked(t){return!t||this.config.blocklist.some(r=>typeof r=="string"?r===t:r.test(t))}};function Ot(e,t){return new R(e,t)}var W=/ \$\$ /,gt=e=>e.match(W);function yt(e,t){return gt(e)?e.replace(W,t?` ${t} `:" "):t?`${t} ${e}`:e}function St(e){let t=e.match(/::[\w-]+/g);return t&&(t.forEach(r=>e=e.replace(r,"")),e+=t.join("")),e}var D=/^\[(.+?)(~?=)"(.*)"\]$/;function $t(e){return D.test(e)?e.replace(D,(t,r,n,s)=>`[${P(r)}${n}"${P(s)}"]`):`.${P(e)}`}export{z as BetterMap,F as CONTROL_SHORTCUT_NO_MERGE,V as TwoKeyMap,R as UnoGenerator,et as attributifyRE,X as clearIdenticalEntries,M as clone,Ot as createGenerator,Et as createValueHandler,wt as cssIdRE,P as e,k as entriesToCss,At as escapeRegExp,J as escapeSelector,ot as expandVariantGroup,ft as extractQuoted,ut as extractorSplit,Ct as extractorSvelte,gt as hasScopePlaceholder,vt as isAttributifySelector,O as isObject,T as isRawUtil,Y as isStaticRule,tt as isStaticShortcut,nt as isValidSelector,ct as matchingPair,N as mergeDeep,_t as mergeSet,St as movePseudoElementsEnd,U as noop,x as normalizeCSSEntries,K as normalizeCSSValues,st as normalizeVariant,it as notNull,q as regexClassGroup,W as regexScopePlaceholder,E as toArray,$t as toEscapedSelector,L as uniq,rt as validateFilterRE,at as warnOnce,bt as withLayer};
