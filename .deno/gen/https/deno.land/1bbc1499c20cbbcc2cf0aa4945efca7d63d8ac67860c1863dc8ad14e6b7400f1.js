// Copyright 2018-2022 the Deno authors. All rights reserved. MIT license.
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
import { AsyncWrap, providerType } from "./async_wrap.ts";
import { HandleWrap } from "./handle_wrap.ts";
import { ownerSymbol } from "./symbols.ts";
import { codeMap, errorMap } from "./uv.ts";
import { notImplemented } from "../_utils.ts";
import { Buffer } from "../buffer.ts";
import { isIP } from "../internal/net.ts";
import * as DenoUnstable from "../../_deno_unstable.ts";
import { isLinux, isWindows } from "../../_util/os.ts";
const AF_INET = 2;
const AF_INET6 = 10;
const UDP_DGRAM_MAXSIZE = 64 * 1024;
export class SendWrap extends AsyncWrap {
    list;
    address;
    port;
    callback;
    oncomplete;
    constructor(){
        super(providerType.UDPSENDWRAP);
    }
}
export class UDP extends HandleWrap {
    [ownerSymbol] = null;
    #address;
    #family;
    #port;
    #remoteAddress;
    #remoteFamily;
    #remotePort;
    #listener;
    #receiving = false;
    #recvBufferSize = UDP_DGRAM_MAXSIZE;
    #sendBufferSize = UDP_DGRAM_MAXSIZE;
    onmessage;
    lookup;
    constructor(){
        super(providerType.UDPWRAP);
    }
    addMembership(_multicastAddress, _interfaceAddress) {
        notImplemented("udp.UDP.prototype.addMembership");
    }
    addSourceSpecificMembership(_sourceAddress, _groupAddress, _interfaceAddress) {
        notImplemented("udp.UDP.prototype.addSourceSpecificMembership");
    }
    /**
   * Bind to an IPv4 address.
   * @param ip The hostname to bind to.
   * @param port The port to bind to
   * @return An error status code.
   */ bind(ip, port, flags) {
        return this.#doBind(ip, port, flags, AF_INET);
    }
    /**
   * Bind to an IPv6 address.
   * @param ip The hostname to bind to.
   * @param port The port to bind to
   * @return An error status code.
   */ bind6(ip, port, flags) {
        return this.#doBind(ip, port, flags, AF_INET6);
    }
    bufferSize(size, buffer, ctx) {
        let err;
        if (size > UDP_DGRAM_MAXSIZE) {
            err = "EINVAL";
        } else if (!this.#address) {
            err = isWindows ? "ENOTSOCK" : "EBADF";
        }
        if (err) {
            ctx.errno = codeMap.get(err);
            ctx.code = err;
            ctx.message = errorMap.get(ctx.errno)[1];
            ctx.syscall = buffer ? "uv_recv_buffer_size" : "uv_send_buffer_size";
            return;
        }
        if (size !== 0) {
            size = isLinux ? size * 2 : size;
            if (buffer) {
                return this.#recvBufferSize = size;
            }
            return this.#sendBufferSize = size;
        }
        return buffer ? this.#recvBufferSize : this.#sendBufferSize;
    }
    connect(ip, port) {
        return this.#doConnect(ip, port, AF_INET);
    }
    connect6(ip, port) {
        return this.#doConnect(ip, port, AF_INET6);
    }
    disconnect() {
        this.#remoteAddress = undefined;
        this.#remotePort = undefined;
        this.#remoteFamily = undefined;
        return 0;
    }
    dropMembership(_multicastAddress, _interfaceAddress) {
        notImplemented("udp.UDP.prototype.dropMembership");
    }
    dropSourceSpecificMembership(_sourceAddress, _groupAddress, _interfaceAddress) {
        notImplemented("udp.UDP.prototype.dropSourceSpecificMembership");
    }
    /**
   * Populates the provided object with remote address entries.
   * @param peername An object to add the remote address entries to.
   * @return An error status code.
   */ getpeername(peername) {
        if (this.#remoteAddress === undefined) {
            return codeMap.get("EBADF");
        }
        peername.address = this.#remoteAddress;
        peername.port = this.#remotePort;
        peername.family = this.#remoteFamily;
        return 0;
    }
    /**
   * Populates the provided object with local address entries.
   * @param sockname An object to add the local address entries to.
   * @return An error status code.
   */ getsockname(sockname) {
        if (this.#address === undefined) {
            return codeMap.get("EBADF");
        }
        sockname.address = this.#address;
        sockname.port = this.#port;
        sockname.family = this.#family;
        return 0;
    }
    /**
   * Opens a file descriptor.
   * @param fd The file descriptor to open.
   * @return An error status code.
   */ open(_fd) {
        // REF: https://github.com/denoland/deno/issues/6529
        notImplemented("udp.UDP.prototype.open");
    }
    /**
   * Start receiving on the connection.
   * @return An error status code.
   */ recvStart() {
        if (!this.#receiving) {
            this.#receiving = true;
            this.#receive();
        }
        return 0;
    }
    /**
   * Stop receiving on the connection.
   * @return An error status code.
   */ recvStop() {
        this.#receiving = false;
        return 0;
    }
    ref() {
        notImplemented("udp.UDP.prototype.ref");
    }
    send(req, bufs, count, ...args) {
        return this.#doSend(req, bufs, count, args, AF_INET);
    }
    send6(req, bufs, count, ...args) {
        return this.#doSend(req, bufs, count, args, AF_INET6);
    }
    setBroadcast(_bool) {
        notImplemented("udp.UDP.prototype.setBroadcast");
    }
    setMulticastInterface(_interfaceAddress) {
        notImplemented("udp.UDP.prototype.setMulticastInterface");
    }
    setMulticastLoopback(_bool) {
        notImplemented("udp.UDP.prototype.setMulticastLoopback");
    }
    setMulticastTTL(_ttl) {
        notImplemented("udp.UDP.prototype.setMulticastTTL");
    }
    setTTL(_ttl) {
        notImplemented("udp.UDP.prototype.setTTL");
    }
    unref() {
        notImplemented("udp.UDP.prototype.unref");
    }
     #doBind(ip, port, _flags, family) {
        // TODO(cmorten): use flags to inform socket reuse etc.
        const listenOptions = {
            port,
            hostname: ip,
            transport: "udp"
        };
        let listener;
        try {
            listener = DenoUnstable.listenDatagram(listenOptions);
        } catch (e) {
            if (e instanceof Deno.errors.AddrInUse) {
                return codeMap.get("EADDRINUSE");
            } else if (e instanceof Deno.errors.AddrNotAvailable) {
                return codeMap.get("EADDRNOTAVAIL");
            }
            // TODO(cmorten): map errors to appropriate error codes.
            return codeMap.get("UNKNOWN");
        }
        const address = listener.addr;
        this.#address = address.hostname;
        this.#port = address.port;
        this.#family = family === AF_INET6 ? "IPv6" : "IPv4";
        this.#listener = listener;
        return 0;
    }
     #doConnect(ip1, port1, family1) {
        this.#remoteAddress = ip1;
        this.#remotePort = port1;
        this.#remoteFamily = family1 === AF_INET6 ? "IPv6" : "IPv4";
        return 0;
    }
     #doSend(req, bufs, _count, args, _family) {
        let hasCallback;
        if (args.length === 3) {
            this.#remotePort = args[0];
            this.#remoteAddress = args[1];
            hasCallback = args[2];
        } else {
            hasCallback = args[0];
        }
        const addr = {
            hostname: this.#remoteAddress,
            port: this.#remotePort,
            transport: "udp"
        };
        // Deno.DatagramConn.prototype.send accepts only one Uint8Array
        const payload = new Uint8Array(Buffer.concat(bufs.map((buf)=>{
            if (typeof buf === "string") {
                return Buffer.from(buf);
            }
            return Buffer.from(buf.buffer, buf.byteOffset, buf.byteLength);
        })));
        (async ()=>{
            let sent;
            let err = null;
            try {
                sent = await this.#listener.send(payload, addr);
            } catch (e) {
                // TODO(cmorten): map errors to appropriate error codes.
                if (e instanceof Deno.errors.BadResource) {
                    err = codeMap.get("EBADF");
                } else if (e instanceof Error && e.message.match(/os error (40|90|10040)/)) {
                    err = codeMap.get("EMSGSIZE");
                } else {
                    err = codeMap.get("UNKNOWN");
                }
                sent = 0;
            }
            if (hasCallback) {
                try {
                    req.oncomplete(err, sent);
                } catch  {
                // swallow callback errors
                }
            }
        })();
        return 0;
    }
    async #receive() {
        if (!this.#receiving) {
            return;
        }
        const p = new Uint8Array(this.#recvBufferSize);
        let buf;
        let remoteAddr;
        let nread;
        try {
            [buf, remoteAddr] = await this.#listener.receive(p);
            nread = buf.length;
        } catch (e1) {
            // TODO(cmorten): map errors to appropriate error codes.
            if (e1 instanceof Deno.errors.Interrupted || e1 instanceof Deno.errors.BadResource) {
                nread = 0;
            } else {
                nread = codeMap.get("UNKNOWN");
            }
            buf = new Uint8Array(0);
            remoteAddr = null;
        }
        nread ??= 0;
        const rinfo = remoteAddr ? {
            address: remoteAddr.hostname,
            port: remoteAddr.port,
            family: isIP(remoteAddr.hostname) === 6 ? "IPv6" : "IPv4"
        } : undefined;
        try {
            this.onmessage(nread, this, Buffer.from(buf), rinfo);
        } catch  {
        // swallow callback errors.
        }
        this.#receive();
    }
    /** Handle socket closure. */ _onClose() {
        this.#receiving = false;
        this.#address = undefined;
        this.#port = undefined;
        this.#family = undefined;
        try {
            this.#listener.close();
        } catch  {
        // listener already closed
        }
        this.#listener = undefined;
        return 0;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3N0ZEAwLjE0Ny4wL25vZGUvaW50ZXJuYWxfYmluZGluZy91ZHBfd3JhcC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOC0yMDIyIHRoZSBEZW5vIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuIE1JVCBsaWNlbnNlLlxuLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbmltcG9ydCB7IEFzeW5jV3JhcCwgcHJvdmlkZXJUeXBlIH0gZnJvbSBcIi4vYXN5bmNfd3JhcC50c1wiO1xuaW1wb3J0IHsgR2V0QWRkckluZm9SZXFXcmFwIH0gZnJvbSBcIi4vY2FyZXNfd3JhcC50c1wiO1xuaW1wb3J0IHsgSGFuZGxlV3JhcCB9IGZyb20gXCIuL2hhbmRsZV93cmFwLnRzXCI7XG5pbXBvcnQgeyBvd25lclN5bWJvbCB9IGZyb20gXCIuL3N5bWJvbHMudHNcIjtcbmltcG9ydCB7IGNvZGVNYXAsIGVycm9yTWFwIH0gZnJvbSBcIi4vdXYudHNcIjtcbmltcG9ydCB7IG5vdEltcGxlbWVudGVkIH0gZnJvbSBcIi4uL191dGlscy50c1wiO1xuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSBcIi4uL2J1ZmZlci50c1wiO1xuaW1wb3J0IHR5cGUgeyBFcnJub0V4Y2VwdGlvbiB9IGZyb20gXCIuLi9pbnRlcm5hbC9lcnJvcnMudHNcIjtcbmltcG9ydCB7IGlzSVAgfSBmcm9tIFwiLi4vaW50ZXJuYWwvbmV0LnRzXCI7XG5pbXBvcnQgKiBhcyBEZW5vVW5zdGFibGUgZnJvbSBcIi4uLy4uL19kZW5vX3Vuc3RhYmxlLnRzXCI7XG5pbXBvcnQgeyBpc0xpbnV4LCBpc1dpbmRvd3MgfSBmcm9tIFwiLi4vLi4vX3V0aWwvb3MudHNcIjtcblxudHlwZSBNZXNzYWdlVHlwZSA9IHN0cmluZyB8IFVpbnQ4QXJyYXkgfCBCdWZmZXIgfCBEYXRhVmlldztcblxuY29uc3QgQUZfSU5FVCA9IDI7XG5jb25zdCBBRl9JTkVUNiA9IDEwO1xuXG5jb25zdCBVRFBfREdSQU1fTUFYU0laRSA9IDY0ICogMTAyNDtcblxuZXhwb3J0IGNsYXNzIFNlbmRXcmFwIGV4dGVuZHMgQXN5bmNXcmFwIHtcbiAgbGlzdCE6IE1lc3NhZ2VUeXBlW107XG4gIGFkZHJlc3MhOiBzdHJpbmc7XG4gIHBvcnQhOiBudW1iZXI7XG5cbiAgY2FsbGJhY2shOiAoZXJyb3I6IEVycm5vRXhjZXB0aW9uIHwgbnVsbCwgYnl0ZXM/OiBudW1iZXIpID0+IHZvaWQ7XG4gIG9uY29tcGxldGUhOiAoZXJyOiBudW1iZXIgfCBudWxsLCBzZW50PzogbnVtYmVyKSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKHByb3ZpZGVyVHlwZS5VRFBTRU5EV1JBUCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFVEUCBleHRlbmRzIEhhbmRsZVdyYXAge1xuICBbb3duZXJTeW1ib2xdOiB1bmtub3duID0gbnVsbDtcblxuICAjYWRkcmVzcz86IHN0cmluZztcbiAgI2ZhbWlseT86IHN0cmluZztcbiAgI3BvcnQ/OiBudW1iZXI7XG5cbiAgI3JlbW90ZUFkZHJlc3M/OiBzdHJpbmc7XG4gICNyZW1vdGVGYW1pbHk/OiBzdHJpbmc7XG4gICNyZW1vdGVQb3J0PzogbnVtYmVyO1xuXG4gICNsaXN0ZW5lcj86IERlbm9VbnN0YWJsZS5EYXRhZ3JhbUNvbm47XG4gICNyZWNlaXZpbmcgPSBmYWxzZTtcblxuICAjcmVjdkJ1ZmZlclNpemUgPSBVRFBfREdSQU1fTUFYU0laRTtcbiAgI3NlbmRCdWZmZXJTaXplID0gVURQX0RHUkFNX01BWFNJWkU7XG5cbiAgb25tZXNzYWdlITogKFxuICAgIG5yZWFkOiBudW1iZXIsXG4gICAgaGFuZGxlOiBVRFAsXG4gICAgYnVmPzogQnVmZmVyLFxuICAgIHJpbmZvPzoge1xuICAgICAgYWRkcmVzczogc3RyaW5nO1xuICAgICAgZmFtaWx5OiBcIklQdjRcIiB8IFwiSVB2NlwiO1xuICAgICAgcG9ydDogbnVtYmVyO1xuICAgICAgc2l6ZT86IG51bWJlcjtcbiAgICB9LFxuICApID0+IHZvaWQ7XG5cbiAgbG9va3VwITogKFxuICAgIGFkZHJlc3M6IHN0cmluZyxcbiAgICBjYWxsYmFjazogKFxuICAgICAgZXJyOiBFcnJub0V4Y2VwdGlvbiB8IG51bGwsXG4gICAgICBhZGRyZXNzOiBzdHJpbmcsXG4gICAgICBmYW1pbHk6IG51bWJlcixcbiAgICApID0+IHZvaWQsXG4gICkgPT4gR2V0QWRkckluZm9SZXFXcmFwIHwgUmVjb3JkPHN0cmluZywgbmV2ZXI+O1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKHByb3ZpZGVyVHlwZS5VRFBXUkFQKTtcbiAgfVxuXG4gIGFkZE1lbWJlcnNoaXAoX211bHRpY2FzdEFkZHJlc3M6IHN0cmluZywgX2ludGVyZmFjZUFkZHJlc3M/OiBzdHJpbmcpOiBudW1iZXIge1xuICAgIG5vdEltcGxlbWVudGVkKFwidWRwLlVEUC5wcm90b3R5cGUuYWRkTWVtYmVyc2hpcFwiKTtcbiAgfVxuXG4gIGFkZFNvdXJjZVNwZWNpZmljTWVtYmVyc2hpcChcbiAgICBfc291cmNlQWRkcmVzczogc3RyaW5nLFxuICAgIF9ncm91cEFkZHJlc3M6IHN0cmluZyxcbiAgICBfaW50ZXJmYWNlQWRkcmVzcz86IHN0cmluZyxcbiAgKTogbnVtYmVyIHtcbiAgICBub3RJbXBsZW1lbnRlZChcInVkcC5VRFAucHJvdG90eXBlLmFkZFNvdXJjZVNwZWNpZmljTWVtYmVyc2hpcFwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCaW5kIHRvIGFuIElQdjQgYWRkcmVzcy5cbiAgICogQHBhcmFtIGlwIFRoZSBob3N0bmFtZSB0byBiaW5kIHRvLlxuICAgKiBAcGFyYW0gcG9ydCBUaGUgcG9ydCB0byBiaW5kIHRvXG4gICAqIEByZXR1cm4gQW4gZXJyb3Igc3RhdHVzIGNvZGUuXG4gICAqL1xuICBiaW5kKGlwOiBzdHJpbmcsIHBvcnQ6IG51bWJlciwgZmxhZ3M6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuI2RvQmluZChpcCwgcG9ydCwgZmxhZ3MsIEFGX0lORVQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEJpbmQgdG8gYW4gSVB2NiBhZGRyZXNzLlxuICAgKiBAcGFyYW0gaXAgVGhlIGhvc3RuYW1lIHRvIGJpbmQgdG8uXG4gICAqIEBwYXJhbSBwb3J0IFRoZSBwb3J0IHRvIGJpbmQgdG9cbiAgICogQHJldHVybiBBbiBlcnJvciBzdGF0dXMgY29kZS5cbiAgICovXG4gIGJpbmQ2KGlwOiBzdHJpbmcsIHBvcnQ6IG51bWJlciwgZmxhZ3M6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuI2RvQmluZChpcCwgcG9ydCwgZmxhZ3MsIEFGX0lORVQ2KTtcbiAgfVxuXG4gIGJ1ZmZlclNpemUoXG4gICAgc2l6ZTogbnVtYmVyLFxuICAgIGJ1ZmZlcjogYm9vbGVhbixcbiAgICBjdHg6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IG51bWJlcj4sXG4gICk6IG51bWJlciB8IHVuZGVmaW5lZCB7XG4gICAgbGV0IGVycjogc3RyaW5nIHwgdW5kZWZpbmVkO1xuXG4gICAgaWYgKHNpemUgPiBVRFBfREdSQU1fTUFYU0laRSkge1xuICAgICAgZXJyID0gXCJFSU5WQUxcIjtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLiNhZGRyZXNzKSB7XG4gICAgICBlcnIgPSBpc1dpbmRvd3MgPyBcIkVOT1RTT0NLXCIgOiBcIkVCQURGXCI7XG4gICAgfVxuXG4gICAgaWYgKGVycikge1xuICAgICAgY3R4LmVycm5vID0gY29kZU1hcC5nZXQoZXJyKSE7XG4gICAgICBjdHguY29kZSA9IGVycjtcbiAgICAgIGN0eC5tZXNzYWdlID0gZXJyb3JNYXAuZ2V0KGN0eC5lcnJubykhWzFdO1xuICAgICAgY3R4LnN5c2NhbGwgPSBidWZmZXIgPyBcInV2X3JlY3ZfYnVmZmVyX3NpemVcIiA6IFwidXZfc2VuZF9idWZmZXJfc2l6ZVwiO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHNpemUgIT09IDApIHtcbiAgICAgIHNpemUgPSBpc0xpbnV4ID8gc2l6ZSAqIDIgOiBzaXplO1xuXG4gICAgICBpZiAoYnVmZmVyKSB7XG4gICAgICAgIHJldHVybiAodGhpcy4jcmVjdkJ1ZmZlclNpemUgPSBzaXplKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICh0aGlzLiNzZW5kQnVmZmVyU2l6ZSA9IHNpemUpO1xuICAgIH1cblxuICAgIHJldHVybiBidWZmZXIgPyB0aGlzLiNyZWN2QnVmZmVyU2l6ZSA6IHRoaXMuI3NlbmRCdWZmZXJTaXplO1xuICB9XG5cbiAgY29ubmVjdChpcDogc3RyaW5nLCBwb3J0OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLiNkb0Nvbm5lY3QoaXAsIHBvcnQsIEFGX0lORVQpO1xuICB9XG5cbiAgY29ubmVjdDYoaXA6IHN0cmluZywgcG9ydDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy4jZG9Db25uZWN0KGlwLCBwb3J0LCBBRl9JTkVUNik7XG4gIH1cblxuICBkaXNjb25uZWN0KCk6IG51bWJlciB7XG4gICAgdGhpcy4jcmVtb3RlQWRkcmVzcyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLiNyZW1vdGVQb3J0ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuI3JlbW90ZUZhbWlseSA9IHVuZGVmaW5lZDtcblxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgZHJvcE1lbWJlcnNoaXAoXG4gICAgX211bHRpY2FzdEFkZHJlc3M6IHN0cmluZyxcbiAgICBfaW50ZXJmYWNlQWRkcmVzcz86IHN0cmluZyxcbiAgKTogbnVtYmVyIHtcbiAgICBub3RJbXBsZW1lbnRlZChcInVkcC5VRFAucHJvdG90eXBlLmRyb3BNZW1iZXJzaGlwXCIpO1xuICB9XG5cbiAgZHJvcFNvdXJjZVNwZWNpZmljTWVtYmVyc2hpcChcbiAgICBfc291cmNlQWRkcmVzczogc3RyaW5nLFxuICAgIF9ncm91cEFkZHJlc3M6IHN0cmluZyxcbiAgICBfaW50ZXJmYWNlQWRkcmVzcz86IHN0cmluZyxcbiAgKTogbnVtYmVyIHtcbiAgICBub3RJbXBsZW1lbnRlZChcInVkcC5VRFAucHJvdG90eXBlLmRyb3BTb3VyY2VTcGVjaWZpY01lbWJlcnNoaXBcIik7XG4gIH1cblxuICAvKipcbiAgICogUG9wdWxhdGVzIHRoZSBwcm92aWRlZCBvYmplY3Qgd2l0aCByZW1vdGUgYWRkcmVzcyBlbnRyaWVzLlxuICAgKiBAcGFyYW0gcGVlcm5hbWUgQW4gb2JqZWN0IHRvIGFkZCB0aGUgcmVtb3RlIGFkZHJlc3MgZW50cmllcyB0by5cbiAgICogQHJldHVybiBBbiBlcnJvciBzdGF0dXMgY29kZS5cbiAgICovXG4gIGdldHBlZXJuYW1lKHBlZXJuYW1lOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXI+KTogbnVtYmVyIHtcbiAgICBpZiAodGhpcy4jcmVtb3RlQWRkcmVzcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gY29kZU1hcC5nZXQoXCJFQkFERlwiKSE7XG4gICAgfVxuXG4gICAgcGVlcm5hbWUuYWRkcmVzcyA9IHRoaXMuI3JlbW90ZUFkZHJlc3M7XG4gICAgcGVlcm5hbWUucG9ydCA9IHRoaXMuI3JlbW90ZVBvcnQhO1xuICAgIHBlZXJuYW1lLmZhbWlseSA9IHRoaXMuI3JlbW90ZUZhbWlseSE7XG5cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBQb3B1bGF0ZXMgdGhlIHByb3ZpZGVkIG9iamVjdCB3aXRoIGxvY2FsIGFkZHJlc3MgZW50cmllcy5cbiAgICogQHBhcmFtIHNvY2tuYW1lIEFuIG9iamVjdCB0byBhZGQgdGhlIGxvY2FsIGFkZHJlc3MgZW50cmllcyB0by5cbiAgICogQHJldHVybiBBbiBlcnJvciBzdGF0dXMgY29kZS5cbiAgICovXG4gIGdldHNvY2tuYW1lKHNvY2tuYW1lOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXI+KTogbnVtYmVyIHtcbiAgICBpZiAodGhpcy4jYWRkcmVzcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gY29kZU1hcC5nZXQoXCJFQkFERlwiKSE7XG4gICAgfVxuXG4gICAgc29ja25hbWUuYWRkcmVzcyA9IHRoaXMuI2FkZHJlc3M7XG4gICAgc29ja25hbWUucG9ydCA9IHRoaXMuI3BvcnQhO1xuICAgIHNvY2tuYW1lLmZhbWlseSA9IHRoaXMuI2ZhbWlseSE7XG5cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBPcGVucyBhIGZpbGUgZGVzY3JpcHRvci5cbiAgICogQHBhcmFtIGZkIFRoZSBmaWxlIGRlc2NyaXB0b3IgdG8gb3Blbi5cbiAgICogQHJldHVybiBBbiBlcnJvciBzdGF0dXMgY29kZS5cbiAgICovXG4gIG9wZW4oX2ZkOiBudW1iZXIpOiBudW1iZXIge1xuICAgIC8vIFJFRjogaHR0cHM6Ly9naXRodWIuY29tL2Rlbm9sYW5kL2Rlbm8vaXNzdWVzLzY1MjlcbiAgICBub3RJbXBsZW1lbnRlZChcInVkcC5VRFAucHJvdG90eXBlLm9wZW5cIik7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgcmVjZWl2aW5nIG9uIHRoZSBjb25uZWN0aW9uLlxuICAgKiBAcmV0dXJuIEFuIGVycm9yIHN0YXR1cyBjb2RlLlxuICAgKi9cbiAgcmVjdlN0YXJ0KCk6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLiNyZWNlaXZpbmcpIHtcbiAgICAgIHRoaXMuI3JlY2VpdmluZyA9IHRydWU7XG4gICAgICB0aGlzLiNyZWNlaXZlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICAvKipcbiAgICogU3RvcCByZWNlaXZpbmcgb24gdGhlIGNvbm5lY3Rpb24uXG4gICAqIEByZXR1cm4gQW4gZXJyb3Igc3RhdHVzIGNvZGUuXG4gICAqL1xuICByZWN2U3RvcCgpOiBudW1iZXIge1xuICAgIHRoaXMuI3JlY2VpdmluZyA9IGZhbHNlO1xuXG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBvdmVycmlkZSByZWYoKTogdm9pZCB7XG4gICAgbm90SW1wbGVtZW50ZWQoXCJ1ZHAuVURQLnByb3RvdHlwZS5yZWZcIik7XG4gIH1cblxuICBzZW5kKFxuICAgIHJlcTogU2VuZFdyYXAsXG4gICAgYnVmczogTWVzc2FnZVR5cGVbXSxcbiAgICBjb3VudDogbnVtYmVyLFxuICAgIC4uLmFyZ3M6IFtudW1iZXIsIHN0cmluZywgYm9vbGVhbl0gfCBbYm9vbGVhbl1cbiAgKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy4jZG9TZW5kKHJlcSwgYnVmcywgY291bnQsIGFyZ3MsIEFGX0lORVQpO1xuICB9XG5cbiAgc2VuZDYoXG4gICAgcmVxOiBTZW5kV3JhcCxcbiAgICBidWZzOiBNZXNzYWdlVHlwZVtdLFxuICAgIGNvdW50OiBudW1iZXIsXG4gICAgLi4uYXJnczogW251bWJlciwgc3RyaW5nLCBib29sZWFuXSB8IFtib29sZWFuXVxuICApOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLiNkb1NlbmQocmVxLCBidWZzLCBjb3VudCwgYXJncywgQUZfSU5FVDYpO1xuICB9XG5cbiAgc2V0QnJvYWRjYXN0KF9ib29sOiAwIHwgMSk6IG51bWJlciB7XG4gICAgbm90SW1wbGVtZW50ZWQoXCJ1ZHAuVURQLnByb3RvdHlwZS5zZXRCcm9hZGNhc3RcIik7XG4gIH1cblxuICBzZXRNdWx0aWNhc3RJbnRlcmZhY2UoX2ludGVyZmFjZUFkZHJlc3M6IHN0cmluZyk6IG51bWJlciB7XG4gICAgbm90SW1wbGVtZW50ZWQoXCJ1ZHAuVURQLnByb3RvdHlwZS5zZXRNdWx0aWNhc3RJbnRlcmZhY2VcIik7XG4gIH1cblxuICBzZXRNdWx0aWNhc3RMb29wYmFjayhfYm9vbDogMCB8IDEpOiBudW1iZXIge1xuICAgIG5vdEltcGxlbWVudGVkKFwidWRwLlVEUC5wcm90b3R5cGUuc2V0TXVsdGljYXN0TG9vcGJhY2tcIik7XG4gIH1cblxuICBzZXRNdWx0aWNhc3RUVEwoX3R0bDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBub3RJbXBsZW1lbnRlZChcInVkcC5VRFAucHJvdG90eXBlLnNldE11bHRpY2FzdFRUTFwiKTtcbiAgfVxuXG4gIHNldFRUTChfdHRsOiBudW1iZXIpOiBudW1iZXIge1xuICAgIG5vdEltcGxlbWVudGVkKFwidWRwLlVEUC5wcm90b3R5cGUuc2V0VFRMXCIpO1xuICB9XG5cbiAgb3ZlcnJpZGUgdW5yZWYoKTogdm9pZCB7XG4gICAgbm90SW1wbGVtZW50ZWQoXCJ1ZHAuVURQLnByb3RvdHlwZS51bnJlZlwiKTtcbiAgfVxuXG4gICNkb0JpbmQoaXA6IHN0cmluZywgcG9ydDogbnVtYmVyLCBfZmxhZ3M6IG51bWJlciwgZmFtaWx5OiBudW1iZXIpOiBudW1iZXIge1xuICAgIC8vIFRPRE8oY21vcnRlbik6IHVzZSBmbGFncyB0byBpbmZvcm0gc29ja2V0IHJldXNlIGV0Yy5cbiAgICBjb25zdCBsaXN0ZW5PcHRpb25zID0ge1xuICAgICAgcG9ydCxcbiAgICAgIGhvc3RuYW1lOiBpcCxcbiAgICAgIHRyYW5zcG9ydDogXCJ1ZHBcIiBhcyBjb25zdCxcbiAgICB9O1xuXG4gICAgbGV0IGxpc3RlbmVyO1xuXG4gICAgdHJ5IHtcbiAgICAgIGxpc3RlbmVyID0gRGVub1Vuc3RhYmxlLmxpc3RlbkRhdGFncmFtKGxpc3Rlbk9wdGlvbnMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmIChlIGluc3RhbmNlb2YgRGVuby5lcnJvcnMuQWRkckluVXNlKSB7XG4gICAgICAgIHJldHVybiBjb2RlTWFwLmdldChcIkVBRERSSU5VU0VcIikhO1xuICAgICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgRGVuby5lcnJvcnMuQWRkck5vdEF2YWlsYWJsZSkge1xuICAgICAgICByZXR1cm4gY29kZU1hcC5nZXQoXCJFQUREUk5PVEFWQUlMXCIpITtcbiAgICAgIH1cblxuICAgICAgLy8gVE9ETyhjbW9ydGVuKTogbWFwIGVycm9ycyB0byBhcHByb3ByaWF0ZSBlcnJvciBjb2Rlcy5cbiAgICAgIHJldHVybiBjb2RlTWFwLmdldChcIlVOS05PV05cIikhO1xuICAgIH1cblxuICAgIGNvbnN0IGFkZHJlc3MgPSBsaXN0ZW5lci5hZGRyIGFzIERlbm8uTmV0QWRkcjtcbiAgICB0aGlzLiNhZGRyZXNzID0gYWRkcmVzcy5ob3N0bmFtZTtcbiAgICB0aGlzLiNwb3J0ID0gYWRkcmVzcy5wb3J0O1xuICAgIHRoaXMuI2ZhbWlseSA9IGZhbWlseSA9PT0gQUZfSU5FVDYgPyAoXCJJUHY2XCIgYXMgY29uc3QpIDogKFwiSVB2NFwiIGFzIGNvbnN0KTtcbiAgICB0aGlzLiNsaXN0ZW5lciA9IGxpc3RlbmVyO1xuXG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICAjZG9Db25uZWN0KGlwOiBzdHJpbmcsIHBvcnQ6IG51bWJlciwgZmFtaWx5OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHRoaXMuI3JlbW90ZUFkZHJlc3MgPSBpcDtcbiAgICB0aGlzLiNyZW1vdGVQb3J0ID0gcG9ydDtcbiAgICB0aGlzLiNyZW1vdGVGYW1pbHkgPSBmYW1pbHkgPT09IEFGX0lORVQ2XG4gICAgICA/IChcIklQdjZcIiBhcyBjb25zdClcbiAgICAgIDogKFwiSVB2NFwiIGFzIGNvbnN0KTtcblxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgI2RvU2VuZChcbiAgICByZXE6IFNlbmRXcmFwLFxuICAgIGJ1ZnM6IE1lc3NhZ2VUeXBlW10sXG4gICAgX2NvdW50OiBudW1iZXIsXG4gICAgYXJnczogW251bWJlciwgc3RyaW5nLCBib29sZWFuXSB8IFtib29sZWFuXSxcbiAgICBfZmFtaWx5OiBudW1iZXIsXG4gICk6IG51bWJlciB7XG4gICAgbGV0IGhhc0NhbGxiYWNrOiBib29sZWFuO1xuXG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAzKSB7XG4gICAgICB0aGlzLiNyZW1vdGVQb3J0ID0gYXJnc1swXSBhcyBudW1iZXI7XG4gICAgICB0aGlzLiNyZW1vdGVBZGRyZXNzID0gYXJnc1sxXSBhcyBzdHJpbmc7XG4gICAgICBoYXNDYWxsYmFjayA9IGFyZ3NbMl0gYXMgYm9vbGVhbjtcbiAgICB9IGVsc2Uge1xuICAgICAgaGFzQ2FsbGJhY2sgPSBhcmdzWzBdIGFzIGJvb2xlYW47XG4gICAgfVxuXG4gICAgY29uc3QgYWRkcjogRGVuby5OZXRBZGRyID0ge1xuICAgICAgaG9zdG5hbWU6IHRoaXMuI3JlbW90ZUFkZHJlc3MhLFxuICAgICAgcG9ydDogdGhpcy4jcmVtb3RlUG9ydCEsXG4gICAgICB0cmFuc3BvcnQ6IFwidWRwXCIsXG4gICAgfTtcblxuICAgIC8vIERlbm8uRGF0YWdyYW1Db25uLnByb3RvdHlwZS5zZW5kIGFjY2VwdHMgb25seSBvbmUgVWludDhBcnJheVxuICAgIGNvbnN0IHBheWxvYWQgPSBuZXcgVWludDhBcnJheShcbiAgICAgIEJ1ZmZlci5jb25jYXQoXG4gICAgICAgIGJ1ZnMubWFwKChidWYpID0+IHtcbiAgICAgICAgICBpZiAodHlwZW9mIGJ1ZiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIEJ1ZmZlci5mcm9tKGJ1Zik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIEJ1ZmZlci5mcm9tKGJ1Zi5idWZmZXIsIGJ1Zi5ieXRlT2Zmc2V0LCBidWYuYnl0ZUxlbmd0aCk7XG4gICAgICAgIH0pLFxuICAgICAgKSxcbiAgICApO1xuXG4gICAgKGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBzZW50OiBudW1iZXI7XG4gICAgICBsZXQgZXJyOiBudW1iZXIgfCBudWxsID0gbnVsbDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgc2VudCA9IGF3YWl0IHRoaXMuI2xpc3RlbmVyIS5zZW5kKHBheWxvYWQsIGFkZHIpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBUT0RPKGNtb3J0ZW4pOiBtYXAgZXJyb3JzIHRvIGFwcHJvcHJpYXRlIGVycm9yIGNvZGVzLlxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIERlbm8uZXJyb3JzLkJhZFJlc291cmNlKSB7XG4gICAgICAgICAgZXJyID0gY29kZU1hcC5nZXQoXCJFQkFERlwiKSE7XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgZSBpbnN0YW5jZW9mIEVycm9yICYmXG4gICAgICAgICAgZS5tZXNzYWdlLm1hdGNoKC9vcyBlcnJvciAoNDB8OTB8MTAwNDApLylcbiAgICAgICAgKSB7XG4gICAgICAgICAgZXJyID0gY29kZU1hcC5nZXQoXCJFTVNHU0laRVwiKSE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZXJyID0gY29kZU1hcC5nZXQoXCJVTktOT1dOXCIpITtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbnQgPSAwO1xuICAgICAgfVxuXG4gICAgICBpZiAoaGFzQ2FsbGJhY2spIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXEub25jb21wbGV0ZShlcnIsIHNlbnQpO1xuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAvLyBzd2FsbG93IGNhbGxiYWNrIGVycm9yc1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSkoKTtcblxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgYXN5bmMgI3JlY2VpdmUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLiNyZWNlaXZpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwID0gbmV3IFVpbnQ4QXJyYXkodGhpcy4jcmVjdkJ1ZmZlclNpemUpO1xuXG4gICAgbGV0IGJ1ZjogVWludDhBcnJheTtcbiAgICBsZXQgcmVtb3RlQWRkcjogRGVuby5OZXRBZGRyIHwgbnVsbDtcbiAgICBsZXQgbnJlYWQ6IG51bWJlciB8IG51bGw7XG5cbiAgICB0cnkge1xuICAgICAgW2J1ZiwgcmVtb3RlQWRkcl0gPSAoYXdhaXQgdGhpcy4jbGlzdGVuZXIhLnJlY2VpdmUocCkpIGFzIFtcbiAgICAgICAgVWludDhBcnJheSxcbiAgICAgICAgRGVuby5OZXRBZGRyLFxuICAgICAgXTtcblxuICAgICAgbnJlYWQgPSBidWYubGVuZ3RoO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIFRPRE8oY21vcnRlbik6IG1hcCBlcnJvcnMgdG8gYXBwcm9wcmlhdGUgZXJyb3IgY29kZXMuXG4gICAgICBpZiAoXG4gICAgICAgIGUgaW5zdGFuY2VvZiBEZW5vLmVycm9ycy5JbnRlcnJ1cHRlZCB8fFxuICAgICAgICBlIGluc3RhbmNlb2YgRGVuby5lcnJvcnMuQmFkUmVzb3VyY2VcbiAgICAgICkge1xuICAgICAgICBucmVhZCA9IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBucmVhZCA9IGNvZGVNYXAuZ2V0KFwiVU5LTk9XTlwiKSE7XG4gICAgICB9XG5cbiAgICAgIGJ1ZiA9IG5ldyBVaW50OEFycmF5KDApO1xuICAgICAgcmVtb3RlQWRkciA9IG51bGw7XG4gICAgfVxuXG4gICAgbnJlYWQgPz89IDA7XG5cbiAgICBjb25zdCByaW5mbyA9IHJlbW90ZUFkZHJcbiAgICAgID8ge1xuICAgICAgICBhZGRyZXNzOiByZW1vdGVBZGRyLmhvc3RuYW1lLFxuICAgICAgICBwb3J0OiByZW1vdGVBZGRyLnBvcnQsXG4gICAgICAgIGZhbWlseTogaXNJUChyZW1vdGVBZGRyLmhvc3RuYW1lKSA9PT0gNlxuICAgICAgICAgID8gKFwiSVB2NlwiIGFzIGNvbnN0KVxuICAgICAgICAgIDogKFwiSVB2NFwiIGFzIGNvbnN0KSxcbiAgICAgIH1cbiAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgdHJ5IHtcbiAgICAgIHRoaXMub25tZXNzYWdlKG5yZWFkLCB0aGlzLCBCdWZmZXIuZnJvbShidWYpLCByaW5mbyk7XG4gICAgfSBjYXRjaCB7XG4gICAgICAvLyBzd2FsbG93IGNhbGxiYWNrIGVycm9ycy5cbiAgICB9XG5cbiAgICB0aGlzLiNyZWNlaXZlKCk7XG4gIH1cblxuICAvKiogSGFuZGxlIHNvY2tldCBjbG9zdXJlLiAqL1xuICBvdmVycmlkZSBfb25DbG9zZSgpOiBudW1iZXIge1xuICAgIHRoaXMuI3JlY2VpdmluZyA9IGZhbHNlO1xuXG4gICAgdGhpcy4jYWRkcmVzcyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLiNwb3J0ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuI2ZhbWlseSA9IHVuZGVmaW5lZDtcblxuICAgIHRyeSB7XG4gICAgICB0aGlzLiNsaXN0ZW5lciEuY2xvc2UoKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIC8vIGxpc3RlbmVyIGFscmVhZHkgY2xvc2VkXG4gICAgfVxuXG4gICAgdGhpcy4jbGlzdGVuZXIgPSB1bmRlZmluZWQ7XG5cbiAgICByZXR1cm4gMDtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDBFQUEwRTtBQUMxRSxzREFBc0Q7QUFDdEQsRUFBRTtBQUNGLDBFQUEwRTtBQUMxRSxnRUFBZ0U7QUFDaEUsc0VBQXNFO0FBQ3RFLHNFQUFzRTtBQUN0RSw0RUFBNEU7QUFDNUUscUVBQXFFO0FBQ3JFLHdCQUF3QjtBQUN4QixFQUFFO0FBQ0YsMEVBQTBFO0FBQzFFLHlEQUF5RDtBQUN6RCxFQUFFO0FBQ0YsMEVBQTBFO0FBQzFFLDZEQUE2RDtBQUM3RCw0RUFBNEU7QUFDNUUsMkVBQTJFO0FBQzNFLHdFQUF3RTtBQUN4RSw0RUFBNEU7QUFDNUUseUNBQXlDO0FBRXpDLFNBQVMsU0FBUyxFQUFFLFlBQVksUUFBUSxpQkFBaUIsQ0FBQztBQUUxRCxTQUFTLFVBQVUsUUFBUSxrQkFBa0IsQ0FBQztBQUM5QyxTQUFTLFdBQVcsUUFBUSxjQUFjLENBQUM7QUFDM0MsU0FBUyxPQUFPLEVBQUUsUUFBUSxRQUFRLFNBQVMsQ0FBQztBQUM1QyxTQUFTLGNBQWMsUUFBUSxjQUFjLENBQUM7QUFDOUMsU0FB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