// Copyright 2018-2022 the Deno authors. All rights reserved. MIT license.
import { deferred } from "../async/mod.ts";
import { assert, assertStringIncludes, fail } from "../testing/asserts.ts";
import { readAll } from "../streams/conversion.ts";
export function notImplemented(msg) {
    const message = msg ? `Not implemented: ${msg}` : "Not implemented";
    throw new Error(message);
}
export function warnNotImplemented(msg) {
    const message = msg ? `Not implemented: ${msg}` : "Not implemented";
    console.warn(message);
}
export const _TextDecoder = TextDecoder;
export const _TextEncoder = TextEncoder;
export function intoCallbackAPI(// deno-lint-ignore no-explicit-any
func, cb, // deno-lint-ignore no-explicit-any
...args) {
    func(...args).then((value)=>cb && cb(null, value), (err)=>cb && cb(err));
}
export function intoCallbackAPIWithIntercept(// deno-lint-ignore no-explicit-any
func, interceptor, cb, // deno-lint-ignore no-explicit-any
...args) {
    func(...args).then((value)=>cb && cb(null, interceptor(value)), (err)=>cb && cb(err));
}
export function spliceOne(list, index) {
    for(; index + 1 < list.length; index++)list[index] = list[index + 1];
    list.pop();
}
// Taken from: https://github.com/nodejs/node/blob/ba684805b6c0eded76e5cd89ee00328ac7a59365/lib/internal/util.js#L125
// Return undefined if there is no match.
// Move the "slow cases" to a separate function to make sure this function gets
// inlined properly. That prioritizes the common case.
export function normalizeEncoding(enc) {
    if (enc == null || enc === "utf8" || enc === "utf-8") return "utf8";
    return slowCases(enc);
}
// https://github.com/nodejs/node/blob/ba684805b6c0eded76e5cd89ee00328ac7a59365/lib/internal/util.js#L130
function slowCases(enc) {
    switch(enc.length){
        case 4:
            if (enc === "UTF8") return "utf8";
            if (enc === "ucs2" || enc === "UCS2") return "utf16le";
            enc = `${enc}`.toLowerCase();
            if (enc === "utf8") return "utf8";
            if (enc === "ucs2") return "utf16le";
            break;
        case 3:
            if (enc === "hex" || enc === "HEX" || `${enc}`.toLowerCase() === "hex") {
                return "hex";
            }
            break;
        case 5:
            if (enc === "ascii") return "ascii";
            if (enc === "ucs-2") return "utf16le";
            if (enc === "UTF-8") return "utf8";
            if (enc === "ASCII") return "ascii";
            if (enc === "UCS-2") return "utf16le";
            enc = `${enc}`.toLowerCase();
            if (enc === "utf-8") return "utf8";
            if (enc === "ascii") return "ascii";
            if (enc === "ucs-2") return "utf16le";
            break;
        case 6:
            if (enc === "base64") return "base64";
            if (enc === "latin1" || enc === "binary") return "latin1";
            if (enc === "BASE64") return "base64";
            if (enc === "LATIN1" || enc === "BINARY") return "latin1";
            enc = `${enc}`.toLowerCase();
            if (enc === "base64") return "base64";
            if (enc === "latin1" || enc === "binary") return "latin1";
            break;
        case 7:
            if (enc === "utf16le" || enc === "UTF16LE" || `${enc}`.toLowerCase() === "utf16le") {
                return "utf16le";
            }
            break;
        case 8:
            if (enc === "utf-16le" || enc === "UTF-16LE" || `${enc}`.toLowerCase() === "utf-16le") {
                return "utf16le";
            }
            break;
        default:
            if (enc === "") return "utf8";
    }
}
export function validateIntegerRange(value, name, min = -2147483648, max = 2147483647) {
    // The defaults for min and max correspond to the limits of 32-bit integers.
    if (!Number.isInteger(value)) {
        throw new Error(`${name} must be 'an integer' but was ${value}`);
    }
    if (value < min || value > max) {
        throw new Error(`${name} must be >= ${min} && <= ${max}. Value was ${value}`);
    }
}
export function once(callback) {
    let called = false;
    return function(...args) {
        if (called) return;
        called = true;
        callback.apply(this, args);
    };
}
/**
 * @param {number} [expectedExecutions = 1]
 * @param {number} [timeout = 1000] Milliseconds to wait before the promise is forcefully exited */ export function mustCall(fn = ()=>{}, expectedExecutions = 1, timeout = 1000) {
    if (expectedExecutions < 1) {
        throw new Error("Expected executions can't be lower than 1");
    }
    let timesExecuted = 0;
    const completed = deferred();
    const abort = setTimeout(()=>completed.reject(), timeout);
    function callback(...args) {
        timesExecuted++;
        if (timesExecuted === expectedExecutions) {
            completed.resolve();
        }
        fn.apply(this, args);
    }
    const result = completed.then(()=>clearTimeout(abort)).catch(()=>fail(`Async operation not completed: Expected ${expectedExecutions}, executed ${timesExecuted}`));
    return [
        result,
        callback, 
    ];
}
/** Asserts that an error thrown in a callback will not be wrongly caught. */ export async function assertCallbackErrorUncaught({ prelude , invocation , cleanup  }) {
    // Since the error has to be uncaught, and that will kill the Deno process,
    // the only way to test this is to spawn a subprocess.
    const p = Deno.run({
        cmd: [
            Deno.execPath(),
            "eval",
            "--no-check",
            "--unstable",
            `${prelude ?? ""}

      ${invocation}(err) => {
        // If the bug is present and the callback is called again with an error,
        // don't throw another error, so if the subprocess fails we know it had the correct behaviour.
        if (!err) throw new Error("success");
      });`, 
        ],
        stderr: "piped"
    });
    const status = await p.status();
    const stderr = new TextDecoder().decode(await readAll(p.stderr));
    p.close();
    p.stderr.close();
    await cleanup?.();
    assert(!status.success);
    assertStringIncludes(stderr, "Error: success");
}
export function makeMethodsEnumerable(klass) {
    const proto = klass.prototype;
    for (const key of Object.getOwnPropertyNames(proto)){
        const value = proto[key];
        if (typeof value === "function") {
            const desc = Reflect.getOwnPropertyDescriptor(proto, key);
            if (desc) {
                desc.enumerable = true;
                Object.defineProperty(proto, key, desc);
            }
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3N0ZEAwLjE0Ny4wL25vZGUvX3V0aWxzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE4LTIwMjIgdGhlIERlbm8gYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4gTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBkZWZlcnJlZCB9IGZyb20gXCIuLi9hc3luYy9tb2QudHNcIjtcbmltcG9ydCB7IGFzc2VydCwgYXNzZXJ0U3RyaW5nSW5jbHVkZXMsIGZhaWwgfSBmcm9tIFwiLi4vdGVzdGluZy9hc3NlcnRzLnRzXCI7XG5pbXBvcnQgeyByZWFkQWxsIH0gZnJvbSBcIi4uL3N0cmVhbXMvY29udmVyc2lvbi50c1wiO1xuXG5leHBvcnQgdHlwZSBCaW5hcnlFbmNvZGluZ3MgPSBcImJpbmFyeVwiO1xuXG5leHBvcnQgdHlwZSBUZXh0RW5jb2RpbmdzID1cbiAgfCBcImFzY2lpXCJcbiAgfCBcInV0ZjhcIlxuICB8IFwidXRmLThcIlxuICB8IFwidXRmMTZsZVwiXG4gIHwgXCJ1Y3MyXCJcbiAgfCBcInVjcy0yXCJcbiAgfCBcImJhc2U2NFwiXG4gIHwgXCJsYXRpbjFcIlxuICB8IFwiaGV4XCI7XG5cbmV4cG9ydCB0eXBlIEVuY29kaW5ncyA9IEJpbmFyeUVuY29kaW5ncyB8IFRleHRFbmNvZGluZ3M7XG5cbmV4cG9ydCBmdW5jdGlvbiBub3RJbXBsZW1lbnRlZChtc2c6IHN0cmluZyk6IG5ldmVyIHtcbiAgY29uc3QgbWVzc2FnZSA9IG1zZyA/IGBOb3QgaW1wbGVtZW50ZWQ6ICR7bXNnfWAgOiBcIk5vdCBpbXBsZW1lbnRlZFwiO1xuICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3YXJuTm90SW1wbGVtZW50ZWQobXNnPzogc3RyaW5nKTogdm9pZCB7XG4gIGNvbnN0IG1lc3NhZ2UgPSBtc2cgPyBgTm90IGltcGxlbWVudGVkOiAke21zZ31gIDogXCJOb3QgaW1wbGVtZW50ZWRcIjtcbiAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xufVxuXG5leHBvcnQgdHlwZSBfVGV4dERlY29kZXIgPSB0eXBlb2YgVGV4dERlY29kZXIucHJvdG90eXBlO1xuZXhwb3J0IGNvbnN0IF9UZXh0RGVjb2RlciA9IFRleHREZWNvZGVyO1xuXG5leHBvcnQgdHlwZSBfVGV4dEVuY29kZXIgPSB0eXBlb2YgVGV4dEVuY29kZXIucHJvdG90eXBlO1xuZXhwb3J0IGNvbnN0IF9UZXh0RW5jb2RlciA9IFRleHRFbmNvZGVyO1xuXG4vLyBBUEkgaGVscGVyc1xuXG5leHBvcnQgdHlwZSBNYXliZU51bGw8VD4gPSBUIHwgbnVsbDtcbmV4cG9ydCB0eXBlIE1heWJlRGVmaW5lZDxUPiA9IFQgfCB1bmRlZmluZWQ7XG5leHBvcnQgdHlwZSBNYXliZUVtcHR5PFQ+ID0gVCB8IG51bGwgfCB1bmRlZmluZWQ7XG5cbmV4cG9ydCBmdW5jdGlvbiBpbnRvQ2FsbGJhY2tBUEk8VD4oXG4gIC8vIGRlbm8tbGludC1pZ25vcmUgbm8tZXhwbGljaXQtYW55XG4gIGZ1bmM6ICguLi5hcmdzOiBhbnlbXSkgPT4gUHJvbWlzZTxUPixcbiAgY2I6IE1heWJlRW1wdHk8KGVycjogTWF5YmVOdWxsPEVycm9yPiwgdmFsdWU/OiBNYXliZUVtcHR5PFQ+KSA9PiB2b2lkPixcbiAgLy8gZGVuby1saW50LWlnbm9yZSBuby1leHBsaWNpdC1hbnlcbiAgLi4uYXJnczogYW55W11cbik6IHZvaWQge1xuICBmdW5jKC4uLmFyZ3MpLnRoZW4oXG4gICAgKHZhbHVlKSA9PiBjYiAmJiBjYihudWxsLCB2YWx1ZSksXG4gICAgKGVycikgPT4gY2IgJiYgY2IoZXJyKSxcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGludG9DYWxsYmFja0FQSVdpdGhJbnRlcmNlcHQ8VDEsIFQyPihcbiAgLy8gZGVuby1saW50LWlnbm9yZSBuby1leHBsaWNpdC1hbnlcbiAgZnVuYzogKC4uLmFyZ3M6IGFueVtdKSA9PiBQcm9taXNlPFQxPixcbiAgaW50ZXJjZXB0b3I6ICh2OiBUMSkgPT4gVDIsXG4gIGNiOiBNYXliZUVtcHR5PChlcnI6IE1heWJlTnVsbDxFcnJvcj4sIHZhbHVlPzogTWF5YmVFbXB0eTxUMj4pID0+IHZvaWQ+LFxuICAvLyBkZW5vLWxpbnQtaWdub3JlIG5vLWV4cGxpY2l0LWFueVxuICAuLi5hcmdzOiBhbnlbXVxuKTogdm9pZCB7XG4gIGZ1bmMoLi4uYXJncykudGhlbihcbiAgICAodmFsdWUpID0+IGNiICYmIGNiKG51bGwsIGludGVyY2VwdG9yKHZhbHVlKSksXG4gICAgKGVycikgPT4gY2IgJiYgY2IoZXJyKSxcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNwbGljZU9uZShsaXN0OiBzdHJpbmdbXSwgaW5kZXg6IG51bWJlcik6IHZvaWQge1xuICBmb3IgKDsgaW5kZXggKyAxIDwgbGlzdC5sZW5ndGg7IGluZGV4KyspIGxpc3RbaW5kZXhdID0gbGlzdFtpbmRleCArIDFdO1xuICBsaXN0LnBvcCgpO1xufVxuXG4vLyBUYWtlbiBmcm9tOiBodHRwczovL2dpdGh1Yi5jb20vbm9kZWpzL25vZGUvYmxvYi9iYTY4NDgwNWI2YzBlZGVkNzZlNWNkODllZTAwMzI4YWM3YTU5MzY1L2xpYi9pbnRlcm5hbC91dGlsLmpzI0wxMjVcbi8vIFJldHVybiB1bmRlZmluZWQgaWYgdGhlcmUgaXMgbm8gbWF0Y2guXG4vLyBNb3ZlIHRoZSBcInNsb3cgY2FzZXNcIiB0byBhIHNlcGFyYXRlIGZ1bmN0aW9uIHRvIG1ha2Ugc3VyZSB0aGlzIGZ1bmN0aW9uIGdldHNcbi8vIGlubGluZWQgcHJvcGVybHkuIFRoYXQgcHJpb3JpdGl6ZXMgdGhlIGNvbW1vbiBjYXNlLlxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZUVuY29kaW5nKFxuICBlbmM6IHN0cmluZyB8IG51bGwsXG4pOiBUZXh0RW5jb2RpbmdzIHwgdW5kZWZpbmVkIHtcbiAgaWYgKGVuYyA9PSBudWxsIHx8IGVuYyA9PT0gXCJ1dGY4XCIgfHwgZW5jID09PSBcInV0Zi04XCIpIHJldHVybiBcInV0ZjhcIjtcbiAgcmV0dXJuIHNsb3dDYXNlcyhlbmMpO1xufVxuXG4vLyBodHRwczovL2dpdGh1Yi5jb20vbm9kZWpzL25vZGUvYmxvYi9iYTY4NDgwNWI2YzBlZGVkNzZlNWNkODllZTAwMzI4YWM3YTU5MzY1L2xpYi9pbnRlcm5hbC91dGlsLmpzI0wxMzBcbmZ1bmN0aW9uIHNsb3dDYXNlcyhlbmM6IHN0cmluZyk6IFRleHRFbmNvZGluZ3MgfCB1bmRlZmluZWQge1xuICBzd2l0Y2ggKGVuYy5sZW5ndGgpIHtcbiAgICBjYXNlIDQ6XG4gICAgICBpZiAoZW5jID09PSBcIlVURjhcIikgcmV0dXJuIFwidXRmOFwiO1xuICAgICAgaWYgKGVuYyA9PT0gXCJ1Y3MyXCIgfHwgZW5jID09PSBcIlVDUzJcIikgcmV0dXJuIFwidXRmMTZsZVwiO1xuICAgICAgZW5jID0gYCR7ZW5jfWAudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmIChlbmMgPT09IFwidXRmOFwiKSByZXR1cm4gXCJ1dGY4XCI7XG4gICAgICBpZiAoZW5jID09PSBcInVjczJcIikgcmV0dXJuIFwidXRmMTZsZVwiO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzOlxuICAgICAgaWYgKGVuYyA9PT0gXCJoZXhcIiB8fCBlbmMgPT09IFwiSEVYXCIgfHwgYCR7ZW5jfWAudG9Mb3dlckNhc2UoKSA9PT0gXCJoZXhcIikge1xuICAgICAgICByZXR1cm4gXCJoZXhcIjtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgNTpcbiAgICAgIGlmIChlbmMgPT09IFwiYXNjaWlcIikgcmV0dXJuIFwiYXNjaWlcIjtcbiAgICAgIGlmIChlbmMgPT09IFwidWNzLTJcIikgcmV0dXJuIFwidXRmMTZsZVwiO1xuICAgICAgaWYgKGVuYyA9PT0gXCJVVEYtOFwiKSByZXR1cm4gXCJ1dGY4XCI7XG4gICAgICBpZiAoZW5jID09PSBcIkFTQ0lJXCIpIHJldHVybiBcImFzY2lpXCI7XG4gICAgICBpZiAoZW5jID09PSBcIlVDUy0yXCIpIHJldHVybiBcInV0ZjE2bGVcIjtcbiAgICAgIGVuYyA9IGAke2VuY31gLnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoZW5jID09PSBcInV0Zi04XCIpIHJldHVybiBcInV0ZjhcIjtcbiAgICAgIGlmIChlbmMgPT09IFwiYXNjaWlcIikgcmV0dXJuIFwiYXNjaWlcIjtcbiAgICAgIGlmIChlbmMgPT09IFwidWNzLTJcIikgcmV0dXJuIFwidXRmMTZsZVwiO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSA2OlxuICAgICAgaWYgKGVuYyA9PT0gXCJiYXNlNjRcIikgcmV0dXJuIFwiYmFzZTY0XCI7XG4gICAgICBpZiAoZW5jID09PSBcImxhdGluMVwiIHx8IGVuYyA9PT0gXCJiaW5hcnlcIikgcmV0dXJuIFwibGF0aW4xXCI7XG4gICAgICBpZiAoZW5jID09PSBcIkJBU0U2NFwiKSByZXR1cm4gXCJiYXNlNjRcIjtcbiAgICAgIGlmIChlbmMgPT09IFwiTEFUSU4xXCIgfHwgZW5jID09PSBcIkJJTkFSWVwiKSByZXR1cm4gXCJsYXRpbjFcIjtcbiAgICAgIGVuYyA9IGAke2VuY31gLnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoZW5jID09PSBcImJhc2U2NFwiKSByZXR1cm4gXCJiYXNlNjRcIjtcbiAgICAgIGlmIChlbmMgPT09IFwibGF0aW4xXCIgfHwgZW5jID09PSBcImJpbmFyeVwiKSByZXR1cm4gXCJsYXRpbjFcIjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgNzpcbiAgICAgIGlmIChcbiAgICAgICAgZW5jID09PSBcInV0ZjE2bGVcIiB8fFxuICAgICAgICBlbmMgPT09IFwiVVRGMTZMRVwiIHx8XG4gICAgICAgIGAke2VuY31gLnRvTG93ZXJDYXNlKCkgPT09IFwidXRmMTZsZVwiXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIFwidXRmMTZsZVwiO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSA4OlxuICAgICAgaWYgKFxuICAgICAgICBlbmMgPT09IFwidXRmLTE2bGVcIiB8fFxuICAgICAgICBlbmMgPT09IFwiVVRGLTE2TEVcIiB8fFxuICAgICAgICBgJHtlbmN9YC50b0xvd2VyQ2FzZSgpID09PSBcInV0Zi0xNmxlXCJcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gXCJ1dGYxNmxlXCI7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgaWYgKGVuYyA9PT0gXCJcIikgcmV0dXJuIFwidXRmOFwiO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUludGVnZXJSYW5nZShcbiAgdmFsdWU6IG51bWJlcixcbiAgbmFtZTogc3RyaW5nLFxuICBtaW4gPSAtMjE0NzQ4MzY0OCxcbiAgbWF4ID0gMjE0NzQ4MzY0Nyxcbik6IHZvaWQge1xuICAvLyBUaGUgZGVmYXVsdHMgZm9yIG1pbiBhbmQgbWF4IGNvcnJlc3BvbmQgdG8gdGhlIGxpbWl0cyBvZiAzMi1iaXQgaW50ZWdlcnMuXG4gIGlmICghTnVtYmVyLmlzSW50ZWdlcih2YWx1ZSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYCR7bmFtZX0gbXVzdCBiZSAnYW4gaW50ZWdlcicgYnV0IHdhcyAke3ZhbHVlfWApO1xuICB9XG5cbiAgaWYgKHZhbHVlIDwgbWluIHx8IHZhbHVlID4gbWF4KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYCR7bmFtZX0gbXVzdCBiZSA+PSAke21pbn0gJiYgPD0gJHttYXh9LiBWYWx1ZSB3YXMgJHt2YWx1ZX1gLFxuICAgICk7XG4gIH1cbn1cblxudHlwZSBPcHRpb25hbFNwcmVhZDxUPiA9IFQgZXh0ZW5kcyB1bmRlZmluZWQgPyBbXVxuICA6IFtUXTtcblxuZXhwb3J0IGZ1bmN0aW9uIG9uY2U8VCA9IHVuZGVmaW5lZD4oXG4gIGNhbGxiYWNrOiAoLi4uYXJnczogT3B0aW9uYWxTcHJlYWQ8VD4pID0+IHZvaWQsXG4pIHtcbiAgbGV0IGNhbGxlZCA9IGZhbHNlO1xuICByZXR1cm4gZnVuY3Rpb24gKHRoaXM6IHVua25vd24sIC4uLmFyZ3M6IE9wdGlvbmFsU3ByZWFkPFQ+KSB7XG4gICAgaWYgKGNhbGxlZCkgcmV0dXJuO1xuICAgIGNhbGxlZCA9IHRydWU7XG4gICAgY2FsbGJhY2suYXBwbHkodGhpcywgYXJncyk7XG4gIH07XG59XG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IFtleHBlY3RlZEV4ZWN1dGlvbnMgPSAxXVxuICogQHBhcmFtIHtudW1iZXJ9IFt0aW1lb3V0ID0gMTAwMF0gTWlsbGlzZWNvbmRzIHRvIHdhaXQgYmVmb3JlIHRoZSBwcm9taXNlIGlzIGZvcmNlZnVsbHkgZXhpdGVkICovXG5leHBvcnQgZnVuY3Rpb24gbXVzdENhbGw8VCBleHRlbmRzIHVua25vd25bXT4oXG4gIGZuOiAoLi4uYXJnczogVCkgPT4gdm9pZCA9ICgpID0+IHt9LFxuICBleHBlY3RlZEV4ZWN1dGlvbnMgPSAxLFxuICB0aW1lb3V0ID0gMTAwMCxcbik6IFtQcm9taXNlPHZvaWQ+LCAoLi4uYXJnczogVCkgPT4gdm9pZF0ge1xuICBpZiAoZXhwZWN0ZWRFeGVjdXRpb25zIDwgMSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkV4cGVjdGVkIGV4ZWN1dGlvbnMgY2FuJ3QgYmUgbG93ZXIgdGhhbiAxXCIpO1xuICB9XG4gIGxldCB0aW1lc0V4ZWN1dGVkID0gMDtcbiAgY29uc3QgY29tcGxldGVkID0gZGVmZXJyZWQoKTtcblxuICBjb25zdCBhYm9ydCA9IHNldFRpbWVvdXQoKCkgPT4gY29tcGxldGVkLnJlamVjdCgpLCB0aW1lb3V0KTtcblxuICBmdW5jdGlvbiBjYWxsYmFjayh0aGlzOiB1bmtub3duLCAuLi5hcmdzOiBUKSB7XG4gICAgdGltZXNFeGVjdXRlZCsrO1xuICAgIGlmICh0aW1lc0V4ZWN1dGVkID09PSBleHBlY3RlZEV4ZWN1dGlvbnMpIHtcbiAgICAgIGNvbXBsZXRlZC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgY29uc3QgcmVzdWx0ID0gY29tcGxldGVkXG4gICAgLnRoZW4oKCkgPT4gY2xlYXJUaW1lb3V0KGFib3J0KSlcbiAgICAuY2F0Y2goKCkgPT5cbiAgICAgIGZhaWwoXG4gICAgICAgIGBBc3luYyBvcGVyYXRpb24gbm90IGNvbXBsZXRlZDogRXhwZWN0ZWQgJHtleHBlY3RlZEV4ZWN1dGlvbnN9LCBleGVjdXRlZCAke3RpbWVzRXhlY3V0ZWR9YCxcbiAgICAgIClcbiAgICApO1xuXG4gIHJldHVybiBbXG4gICAgcmVzdWx0LFxuICAgIGNhbGxiYWNrLFxuICBdO1xufVxuLyoqIEFzc2VydHMgdGhhdCBhbiBlcnJvciB0aHJvd24gaW4gYSBjYWxsYmFjayB3aWxsIG5vdCBiZSB3cm9uZ2x5IGNhdWdodC4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhc3NlcnRDYWxsYmFja0Vycm9yVW5jYXVnaHQoXG4gIHsgcHJlbHVkZSwgaW52b2NhdGlvbiwgY2xlYW51cCB9OiB7XG4gICAgLyoqIEFueSBjb2RlIHdoaWNoIG5lZWRzIHRvIHJ1biBiZWZvcmUgdGhlIGFjdHVhbCBpbnZvY2F0aW9uIChub3RhYmx5LCBhbnkgaW1wb3J0IHN0YXRlbWVudHMpLiAqL1xuICAgIHByZWx1ZGU/OiBzdHJpbmc7XG4gICAgLyoqXG4gICAgICogVGhlIHN0YXJ0IG9mIHRoZSBpbnZvY2F0aW9uIG9mIHRoZSBmdW5jdGlvbiwgZS5nLiBgb3BlbihcImZvby50eHRcIiwgYC5cbiAgICAgKiBUaGUgY2FsbGJhY2sgd2lsbCBiZSBhZGRlZCBhZnRlciBpdC5cbiAgICAgKi9cbiAgICBpbnZvY2F0aW9uOiBzdHJpbmc7XG4gICAgLyoqIENhbGxlZCBhZnRlciB0aGUgc3VicHJvY2VzcyBpcyBmaW5pc2hlZCBidXQgYmVmb3JlIHJ1bm5pbmcgdGhlIGFzc2VydGlvbnMsIGUuZy4gdG8gY2xlYW4gdXAgY3JlYXRlZCBmaWxlcy4gKi9cbiAgICBjbGVhbnVwPzogKCkgPT4gUHJvbWlzZTx2b2lkPiB8IHZvaWQ7XG4gIH0sXG4pIHtcbiAgLy8gU2luY2UgdGhlIGVycm9yIGhhcyB0byBiZSB1bmNhdWdodCwgYW5kIHRoYXQgd2lsbCBraWxsIHRoZSBEZW5vIHByb2Nlc3MsXG4gIC8vIHRoZSBvbmx5IHdheSB0byB0ZXN0IHRoaXMgaXMgdG8gc3Bhd24gYSBzdWJwcm9jZXNzLlxuICBjb25zdCBwID0gRGVuby5ydW4oe1xuICAgIGNtZDogW1xuICAgICAgRGVuby5leGVjUGF0aCgpLFxuICAgICAgXCJldmFsXCIsXG4gICAgICBcIi0tbm8tY2hlY2tcIiwgLy8gUnVubmluZyBUU0MgZm9yIGV2ZXJ5IG9uZSBvZiB0aGVzZSB0ZXN0cyB3b3VsZCB0YWtlIHdheSB0b28gbG9uZ1xuICAgICAgXCItLXVuc3RhYmxlXCIsXG4gICAgICBgJHtwcmVsdWRlID8/IFwiXCJ9XG5cbiAgICAgICR7aW52b2NhdGlvbn0oZXJyKSA9PiB7XG4gICAgICAgIC8vIElmIHRoZSBidWcgaXMgcHJlc2VudCBhbmQgdGhlIGNhbGxiYWNrIGlzIGNhbGxlZCBhZ2FpbiB3aXRoIGFuIGVycm9yLFxuICAgICAgICAvLyBkb24ndCB0aHJvdyBhbm90aGVyIGVycm9yLCBzbyBpZiB0aGUgc3VicHJvY2VzcyBmYWlscyB3ZSBrbm93IGl0IGhhZCB0aGUgY29ycmVjdCBiZWhhdmlvdXIuXG4gICAgICAgIGlmICghZXJyKSB0aHJvdyBuZXcgRXJyb3IoXCJzdWNjZXNzXCIpO1xuICAgICAgfSk7YCxcbiAgICBdLFxuICAgIHN0ZGVycjogXCJwaXBlZFwiLFxuICB9KTtcbiAgY29uc3Qgc3RhdHVzID0gYXdhaXQgcC5zdGF0dXMoKTtcbiAgY29uc3Qgc3RkZXJyID0gbmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKGF3YWl0IHJlYWRBbGwocC5zdGRlcnIpKTtcbiAgcC5jbG9zZSgpO1xuICBwLnN0ZGVyci5jbG9zZSgpO1xuICBhd2FpdCBjbGVhbnVwPy4oKTtcbiAgYXNzZXJ0KCFzdGF0dXMuc3VjY2Vzcyk7XG4gIGFzc2VydFN0cmluZ0luY2x1ZGVzKHN0ZGVyciwgXCJFcnJvcjogc3VjY2Vzc1wiKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VNZXRob2RzRW51bWVyYWJsZShrbGFzczogeyBuZXcgKCk6IHVua25vd24gfSk6IHZvaWQge1xuICBjb25zdCBwcm90byA9IGtsYXNzLnByb3RvdHlwZTtcbiAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMocHJvdG8pKSB7XG4gICAgY29uc3QgdmFsdWUgPSBwcm90b1trZXldO1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgY29uc3QgZGVzYyA9IFJlZmxlY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHByb3RvLCBrZXkpO1xuICAgICAgaWYgKGRlc2MpIHtcbiAgICAgICAgZGVzYy5lbnVtZXJhYmxlID0gdHJ1ZTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3RvLCBrZXksIGRlc2MpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDBFQUEwRTtBQUMxRSxTQUFTLFFBQVEsUUFBUSxpQkFBaUIsQ0FBQztBQUMzQyxTQUFTLE1BQU0sRUFBRSxvQkFBb0IsRUFBRSxJQUFJLFFBQVEsdUJBQXVCLENBQUM7QUFDM0UsU0FBUyxPQUFPLFFBQVEsMEJBQTBCLENBQUM7QUFpQm5ELE9BQU8sU0FBUyxjQUFjLENBQUMsR0FBVyxFQUFTO0lBQ2pELE1BQU0sT0FBTyxHQUFHLEdBQUcsR0FBRyxDQUFDLGlCQUFpQixFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsaUJBQWlCLEFBQUM7SUFDcEUsTUFBTSxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztDQUMxQjtBQUVELE9BQU8sU0FBUyxrQkFBa0IsQ0FBQyxHQUFZLEVBQVE7SUFDckQsTUFBTSxPQUFPLEdBQUcsR0FBRyxHQUFHLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxpQkFBaUIsQUFBQztJQUNwRSxPQUFPLENBQUMsSUFBSSxDQUFD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